.check: &check
    - network: idc
      docker:
        image: node
      stages:
        - name: æ£€æµ‹å½“å‰åˆ†æ”¯æ˜¯å¦å·² rebase master åˆ†æ”¯
          type: git:rebaseCheck
          options:
            target: master
        - name: make message
          script: echo "æŽ¥æ”¶åˆ°ä¸€ä¸ªæ–°çš„ Merge Requestï¼Œè¯·åŠæ—¶å¤„ç† ï¼\né¡¹ç›®ï¼š${ORANGE_REPO_SLUG} \nåˆå…¥åˆ†æ”¯ï¼š${ORANGE_MERGE_REQUEST_BRANCH} -> ${ORANGE_BRANCH} \næäº¤ä¿¡æ¯ï¼š${ORANGE_LATEST_COMMIT_MESSAGE} \nMRå‘èµ·äººï¼š${ORANGE_MERGE_REQUEST_PROPOSER} \ngit å¯¹æ¯”ï¼š[${ORANGE_EVENT_URL}](${ORANGE_EVENT_URL})" > message.txt
        - name: message
          type: wework:message
          options:
            robot: 7ab2588c-2399-450e-a0ed-57949bb49a54
            fromFile: message.txt
        - name: å°†æ³¨é‡Šè¾“å‡ºä¸ºæ–‡ä»¶
          type: git:commitList
          options:
            toFile: orange-commits.json
        - name: å®‰è£…tnpm
          script: npm install @tencent/tnpm -g --registry=https://mirrors.tencent.com/npm/
        - name: ä¾èµ–å®‰è£…
          script: tnpm install
        - name: æ£€æŸ¥eslint
          script: npm run lint
        - name: æž„å»º&å‘å¸ƒ
          script: npm run pack
        - name: message
          type: wework:message
          options:
            message: è¯·åˆ° [http://qrnm.wsd.com/#/](http://qrnm.wsd.com/#/) æ‰‹åŠ¨æ”¾é‡æž„å»ºçš„bundleï¼Œæ”¾é‡çš„é¡ºåºæ˜¯[2%, 30%, 100%]ã€‚
        - name: make message
          script: echo "#### ${ORANGE_REPO_SLUG} è‡ªåŠ¨æž„å»ºæˆåŠŸðŸŽ‰\nðŸ“‹ æäº¤ä¿¡æ¯ï¼š\n> ${ORANGE_LATEST_COMMIT_MESSAGE} \nðŸ‘¨ðŸ»â€ðŸ’» æž„å»ºè§¦å‘äººï¼š${ORANGE_BUILD_USER} \nðŸ’¬ git å¯¹æ¯”ï¼š[${ORANGE_EVENT_URL}](${ORANGE_EVENT_URL}) \næž„å»ºæ—¥å¿—ï¼š[http://orange-ci.oa.com/build/log?sn=${ORANGE_BUILD_ID}](http://orange-ci.oa.com/build/log?sn=${ORANGE_BUILD_ID}) \n\nè¯·åˆ° [http://qrnm.wsd.com/#/](http://qrnm.wsd.com/#/) æ‰‹åŠ¨æ”¾é‡bundleï¼Œæ”¾é‡çš„é¡ºåºæ˜¯[2%, 30%, 100%]\n è®°å¾—æ›´æ–°[å‘ç‰ˆè®°å½•](https://iwiki.woa.com/pages/viewpage.action?pageId=510666352)" > message.txt
        - name: message
          type: wework:message
          options:
            fromFile: message.txt

master:
  merge_request:
    - <<: *check

